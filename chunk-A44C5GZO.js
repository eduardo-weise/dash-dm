import{Da as A,Ea as z,Fa as G,Ga as L,Ha as R,Ia as a,Ja as c,Ka as b,La as _,M as y,Ma as h,Na as V,Oa as q,Pa as J,Q as v,Qa as d,Ra as B,Sa as H,Ta as i,Ua as x,V as $,W as j,Ya as u,Za as D,a as T,b as F,ba as g,d as p,ma as m,xa as l}from"./chunk-HFVBQSJP.js";var P={gistId:"58dfac18542579126cb5a7cbbac654c7",githubToken:"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",gistFileName:"data.json"};var W="https://api.github.com/gists",S=class n{gistId=P.gistId;token=P.githubToken;fileName=P.gistFileName;read(){return p(this,null,function*(){let t=yield fetch(`${W}/${this.gistId}`,{headers:this.headers()});if(!t.ok)throw new Error(`Falha ao ler Gist: ${t.status} ${t.statusText}`);let r=(yield t.json()).files?.[this.fileName]?.content;if(!r)throw new Error(`Arquivo "${this.fileName}" n\xE3o encontrado no Gist`);return JSON.parse(r)})}update(t){return p(this,null,function*(){let e=yield fetch(`${W}/${this.gistId}`,{method:"PATCH",headers:this.headers(),body:JSON.stringify({files:{[this.fileName]:{content:JSON.stringify(t,null,2)}}})});if(!e.ok)throw new Error(`Falha ao atualizar Gist: ${e.status} ${e.statusText}`)})}headers(){return{Authorization:`token ${this.token}`,Accept:"application/vnd.github+json","Content-Type":"application/json"}}static \u0275fac=function(e){return new(e||n)};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};function N(){return new Date().toISOString().slice(0,10)}function X(n){return[...n].sort((t,e)=>t.localeCompare(e,void 0,{sensitivity:"base"}))}function Y(n,t){let e=0,r=new Date(n),s=new Date(t);for(r.setDate(r.getDate()+1);r<=s;){let o=r.getDay();o!==0&&o!==6&&e++,r.setDate(r.getDate()+1)}return e}var I=class n{gist=v(S);_state=g(null);_loading=g(!0);_error=g(null);_saving=g(!1);state=this._state.asReadonly();loading=this._loading.asReadonly();error=this._error.asReadonly();saving=this._saving.asReadonly();names=u(()=>this._state()?.names??[]);currentIndex=u(()=>this._state()?.currentIndex??0);currentPresenter=u(()=>{let t=this._state();return t?.names.length?t.names[t.currentIndex%t.names.length]??null:null});constructor(){this.load()}reload(){this.load()}load(){return p(this,null,function*(){this._loading.set(!0),this._error.set(null);try{let t=yield this.gist.read(),e=Array.isArray(t.names)?X(t.names):[],r=e.length,s=typeof t.currentIndex=="number"?t.currentIndex:0,o=typeof t.lastAdvancedDate=="string"?t.lastAdvancedDate:N(),f=N();if(r>0&&o<f){let E=Y(o,f);if(E>0){s=(s+E)%r,o=f;let U={names:e,currentIndex:s,lastAdvancedDate:o};yield this.gist.update(U)}}this._state.set({names:e,currentIndex:s,lastAdvancedDate:o})}catch(t){this._error.set(t instanceof Error?t.message:"Falha ao carregar dados do Gist"),this._state.set({names:[],currentIndex:0,lastAdvancedDate:N()})}finally{this._loading.set(!1)}})}skip(){return p(this,null,function*(){let t=this._state();if(!t||t.names.length===0)return;let e=t.names.length,r=(t.currentIndex+1)%e,s=F(T({},t),{currentIndex:r});this._state.set(s),this._saving.set(!0);try{yield this.gist.update(s)}catch(o){this._state.set(t),this._error.set(o instanceof Error?o.message:"Falha ao salvar no Gist")}finally{this._saving.set(!1)}})}getCarouselWindow(t=2){let e=this._state();if(!e?.names.length)return[];let r=e.names.length,s=[];for(let o=-t;o<=t;o++){let f=(e.currentIndex+o+r*10)%r;s.push({name:e.names[f],position:o})}return s}static \u0275fac=function(e){return new(e||n)};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};var K=(n,t)=>t.name;function Z(n,t){if(n&1&&(_(0,"div",2)(1,"span",3),i(2),h()()),n&2){let e=t.$implicit,r=d();B("transform",r.getTransform(e.position))("opacity",r.getOpacity(e.position)),H("sphere-list__item--center",e.position===0),m(2),x(e.name)}}var w=class n{items=[];getTransform(t){let e=this.getScale(t);return`translateX(-50%) translateY(calc(-50% + ${t*2.5}rem)) scale(${e})`}getScale(t){let e=Math.abs(t);return e===0?1:e===1?.65:e===2?.4:.2}getOpacity(t){let e=Math.abs(t);return e===0?1:e===1?.6:e===2?.35:0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-sphere-list"]],inputs:{items:"items"},decls:3,vars:0,consts:[["role","list",1,"sphere-list"],["role","listitem",1,"sphere-list__item",3,"sphere-list__item--center","transform","opacity"],["role","listitem",1,"sphere-list__item"],[1,"sphere-list__name"]],template:function(e,r){e&1&&(_(0,"div",0),G(1,Z,3,7,"div",1,K),h()),e&2&&(m(),L(r.items))},styles:[".sphere-list[_ngcontent-%COMP%]{position:relative;height:18rem;width:100%}.sphere-list__item[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;font-size:2.25rem;transition:transform .5s cubic-bezier(.4,0,.2,1),opacity .5s cubic-bezier(.4,0,.2,1)}.sphere-list__item--center[_ngcontent-%COMP%]{font-weight:600}.sphere-list__name[_ngcontent-%COMP%]{white-space:nowrap;text-align:center}"]})};var k=class n{skip=D();previous=D();onSkip(){this.skip.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-carousel-controls"]],outputs:{skip:"skip",previous:"previous"},decls:3,vars:0,consts:[[1,"carousel-controls"],["type","button","aria-label","Pular para o pr\xF3ximo apresentador",1,"carousel-controls__btn","carousel-controls__btn--primary",3,"click"]],template:function(e,r){e&1&&(_(0,"div",0)(1,"button",1),J("click",function(){return r.onSkip()}),i(2," Skip "),h()())},styles:[".carousel-controls[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap;justify-content:center}.carousel-controls__btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.375rem;font-size:.9375rem;font-weight:500;cursor:pointer;border:1px solid transparent;transition:background-color .2s,color .2s}.carousel-controls__btn--primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border-color:#2563eb}.carousel-controls__btn--primary[_ngcontent-%COMP%]:hover{background:#1d4ed8}.carousel-controls__btn--secondary[_ngcontent-%COMP%]{background:transparent;color:#374151;border-color:#d1d5db}.carousel-controls__btn--secondary[_ngcontent-%COMP%]:hover{background:#f3f4f6}"]})};function ee(n,t){n&1&&(a(0,"p",0),i(1,"Carregando\u2026"),c())}function te(n,t){if(n&1&&(a(0,"p",1),i(1),c()),n&2){let e=d();m(),x(e.error())}}function ne(n,t){n&1&&(a(0,"p",2),i(1,"Nenhum nome em "),a(2,"code"),i(3,"data.json"),c(),i(4,"."),c())}function re(n,t){if(n&1){let e=V();a(0,"div",3),b(1,"app-sphere-list",4),a(2,"app-carousel-controls",5),q("skip",function(){$(e);let s=d();return j(s.skip())}),c()()}if(n&2){let e=d();m(),R("items",e.carouselItems())}}var M=class n{stateService=v(I);loading=this.stateService.loading;error=this.stateService.error;names=this.stateService.names;carouselItems=u(()=>(this.stateService.names(),this.stateService.currentIndex(),this.stateService.getCarouselWindow(3)));skip(){this.stateService.skip()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-carousel-container"]],decls:4,vars:1,consts:[[1,"carousel-container__loading"],["role","alert",1,"carousel-container__error"],[1,"carousel-container__empty"],[1,"carousel-container"],[3,"items"],[3,"skip"]],template:function(e,r){e&1&&A(0,ee,2,0,"p",0)(1,te,2,1,"p",1)(2,ne,5,0,"p",2)(3,re,3,1,"div",3),e&2&&z(r.loading()?0:r.error()?1:r.names().length===0?2:3)},dependencies:[w,k],styles:[".carousel-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.carousel-container__loading[_ngcontent-%COMP%], .carousel-container__empty[_ngcontent-%COMP%]{color:var(--text-muted, #666);margin:0}.carousel-container__error[_ngcontent-%COMP%]{color:var(--error, #c00);margin:0}"]})};var Q=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-presenter-page"]],decls:6,vars:0,consts:[[1,"presenter-page"],[1,"presenter-page__header"],[1,"presenter-page__title"],[1,"presenter-page__main"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"header",1)(2,"h1",2),i(3,"Quem apresenta hoje?"),c()(),a(4,"main",3),b(5,"app-carousel-container"),c()())},dependencies:[M],styles:[".presenter-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:1rem;box-sizing:border-box}.presenter-page__header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.presenter-page__title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.presenter-page__main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:2rem;width:100%;max-width:32rem}"]})};export{Q as PresenterPageComponent};
