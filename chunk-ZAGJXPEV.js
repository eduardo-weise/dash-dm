import{Da as z,Ea as G,Fa as K,Ga as W,Ha as Y,Ia as a,Ja as l,Ka as h,La as u,M as R,Ma as _,Na as H,Oa as J,Pa as O,Q as V,Qa as m,Ra as X,Sa as $,Ta as o,Ua as v,V as w,W as E,Ya as g,Za as N,a as D,b as k,ba as C,d as L,ma as d,xa as p}from"./chunk-HFVBQSJP.js";var x="dash-dm-currentIndex",q="dash-dm-lastAdvancedDate",Q="data.json";function T(){return new Date().toISOString().slice(0,10)}function U(n){return[...n].sort((t,e)=>t.localeCompare(e,void 0,{sensitivity:"base"}))}var y=class n{_state=C(null);_loading=C(!0);_error=C(null);state=this._state.asReadonly();loading=this._loading.asReadonly();error=this._error.asReadonly();names=g(()=>this._state()?.names??[]);currentIndex=g(()=>this._state()?.currentIndex??0);currentPresenter=g(()=>{let t=this._state();return t?.names.length?t.names[t.currentIndex%t.names.length]??null:null});constructor(){this.load()}load(){return L(this,null,function*(){this._loading.set(!0),this._error.set(null);try{let t=yield fetch(Q);if(!t.ok)throw new Error("Falha ao carregar data.json");let e=yield t.json(),r=Array.isArray(e.names)?U(e.names):[],s=r.length,i=typeof e.currentIndex=="number"?e.currentIndex:0,c=typeof e.lastAdvancedDate=="string"?e.lastAdvancedDate:T(),j=localStorage.getItem(x),F=localStorage.getItem(q);if(j!==null){let f=parseInt(j,10);Number.isNaN(f)||(i=Math.max(0,f%Math.max(1,s)))}F!==null&&(c=F);let M=T();if(s>0&&c<M){let f=Math.floor((new Date(M).getTime()-new Date(c).getTime())/864e5);f>0&&(i=(i+f)%s,c=M,localStorage.setItem(x,String(i)),localStorage.setItem(q,c))}this._state.set({names:r,currentIndex:i,lastAdvancedDate:c})}catch(t){this._error.set(t instanceof Error?t.message:"Falha ao carregar dados"),this._state.set({names:[],currentIndex:0,lastAdvancedDate:T()})}finally{this._loading.set(!1)}})}skip(){let t=this._state();if(!t||t.names.length===0)return;let e=t.names.length,r=(t.currentIndex+1)%e;this._state.set(k(D({},t),{currentIndex:r})),localStorage.setItem(x,String(r))}previous(){let t=this._state();if(!t||t.names.length===0)return;let e=t.names.length,r=(t.currentIndex-1+e)%e;this._state.set(k(D({},t),{currentIndex:r})),localStorage.setItem(x,String(r))}getCarouselWindow(t=2){let e=this._state();if(!e?.names.length)return[];let r=e.names.length,s=[];for(let i=-t;i<=t;i++){let c=(e.currentIndex+i+r*10)%r;s.push({name:e.names[c],position:i})}return s}static \u0275fac=function(e){return new(e||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var Z=(n,t)=>t.name+t.position;function ee(n,t){if(n&1&&(u(0,"div",2)(1,"span",3),o(2),_()()),n&2){let e=t.$implicit,r=m();X("transform","scale("+r.getScale(e.position)+")")("opacity",r.getOpacity(e.position)),$("sphere-list__item--center",e.position===0),d(2),v(e.name)}}var S=class n{items=[];getScale(t){let e=Math.abs(t);return e===0?1:e===1?.85:.7}getOpacity(t){let e=Math.abs(t);return e===0?1:e===1?.6:.35}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-sphere-list"]],inputs:{items:"items"},decls:3,vars:0,consts:[["role","list",1,"sphere-list"],["role","listitem",1,"sphere-list__item",3,"sphere-list__item--center","transform","opacity"],["role","listitem",1,"sphere-list__item"],[1,"sphere-list__name"]],template:function(e,r){e&1&&(u(0,"div",0),K(1,ee,3,7,"div",1,Z),_()),e&2&&(d(),W(r.items))},styles:[".sphere-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem;min-height:18rem;padding:1rem 0}.sphere-list__item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transition:transform .35s ease-out,opacity .35s ease-out;transform-origin:center}.sphere-list__item--center[_ngcontent-%COMP%]{font-weight:600;font-size:1.25rem}.sphere-list__name[_ngcontent-%COMP%]{white-space:nowrap;text-align:center}"]})};var I=class n{skip=N();previous=N();onSkip(){this.skip.emit()}onPrevious(){this.previous.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-carousel-controls"]],outputs:{skip:"skip",previous:"previous"},decls:5,vars:0,consts:[[1,"carousel-controls"],["type","button","aria-label","Apresentador anterior",1,"carousel-controls__btn","carousel-controls__btn--secondary",3,"click"],["type","button","aria-label","Pular para o pr\xF3ximo apresentador",1,"carousel-controls__btn","carousel-controls__btn--primary",3,"click"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"button",1),O("click",function(){return r.onPrevious()}),o(2," Anterior "),_(),u(3,"button",2),O("click",function(){return r.onSkip()}),o(4," Pular apresentador "),_()())},styles:[".carousel-controls[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap;justify-content:center}.carousel-controls__btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.375rem;font-size:.9375rem;font-weight:500;cursor:pointer;border:1px solid transparent;transition:background-color .2s,color .2s}.carousel-controls__btn--primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border-color:#2563eb}.carousel-controls__btn--primary[_ngcontent-%COMP%]:hover{background:#1d4ed8}.carousel-controls__btn--secondary[_ngcontent-%COMP%]{background:transparent;color:#374151;border-color:#d1d5db}.carousel-controls__btn--secondary[_ngcontent-%COMP%]:hover{background:#f3f4f6}"]})};function te(n,t){n&1&&(a(0,"p",0),o(1,"Carregando\u2026"),l())}function ne(n,t){if(n&1&&(a(0,"p",1),o(1),l()),n&2){let e=m();d(),v(e.error())}}function re(n,t){n&1&&(a(0,"p",2),o(1,"Nenhum nome em "),a(2,"code"),o(3,"data.json"),l(),o(4,"."),l())}function oe(n,t){if(n&1){let e=H();a(0,"div",3),h(1,"app-sphere-list",4),a(2,"app-carousel-controls",5),J("skip",function(){w(e);let s=m();return E(s.skip())})("previous",function(){w(e);let s=m();return E(s.previous())}),l()()}if(n&2){let e=m();d(),Y("items",e.carouselItems())}}var P=class n{stateService=V(y);loading=this.stateService.loading;error=this.stateService.error;names=this.stateService.names;carouselItems=g(()=>(this.stateService.names(),this.stateService.currentIndex(),this.stateService.getCarouselWindow(2)));skip(){this.stateService.skip()}previous(){this.stateService.previous()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-carousel-container"]],decls:4,vars:1,consts:[[1,"carousel-container__loading"],["role","alert",1,"carousel-container__error"],[1,"carousel-container__empty"],[1,"carousel-container"],[3,"items"],[3,"skip","previous"]],template:function(e,r){e&1&&z(0,te,2,0,"p",0)(1,ne,2,1,"p",1)(2,re,5,0,"p",2)(3,oe,3,1,"div",3),e&2&&G(r.loading()?0:r.error()?1:r.names().length===0?2:3)},dependencies:[S,I],styles:[".carousel-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;width:100%}.carousel-container__loading[_ngcontent-%COMP%], .carousel-container__empty[_ngcontent-%COMP%]{color:var(--text-muted, #666);margin:0}.carousel-container__error[_ngcontent-%COMP%]{color:var(--error, #c00);margin:0}"]})};var B=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-presenter-page"]],decls:6,vars:0,consts:[[1,"presenter-page"],[1,"presenter-page__header"],[1,"presenter-page__title"],[1,"presenter-page__main"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"header",1)(2,"h1",2),o(3,"Apresentador da Daily"),l()(),a(4,"main",3),h(5,"app-carousel-container"),l()())},dependencies:[P],styles:[".presenter-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:1rem;box-sizing:border-box}.presenter-page__header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.presenter-page__title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.presenter-page__main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:2rem;width:100%;max-width:32rem}"]})};export{B as PresenterPageComponent};
